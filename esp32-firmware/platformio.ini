[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino

; Configuration des bibliothèques
lib_deps = 
    WiFi
    PubSubClient
    ArduinoJson
    ESP32Servo
    HX711
    MFRC522
    ESP32-BLE-Arduino
    AsyncTCP
    ESPAsyncWebServer
    Preferences
    NTPClient
    Time

; Configuration du moniteur série
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

; Configuration de l'upload
upload_speed = 921600

; Définitions du build
build_flags = 
    -DCORE_DEBUG_LEVEL=3
    -DCONFIG_ARDUHAL_LOG_COLORS
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue

; Configuration de la partition
board_build.partitions = huge_app.csv
board_build.filesystem = spiffs

; Configuration OTA
upload_protocol = esptool
; upload_port = COM3  ; Décommentez et modifiez selon votre port série

[env:esp32dev_ota]
extends = env:esp32dev
upload_protocol = espota
upload_port = 192.168.1.100  ; IP de l'ESP32 pour OTA
upload_flags = 
    --port=3232
    --auth=pet-smart-home-ota